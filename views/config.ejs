<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¬ë™-êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™ ì„¤ì • (ë°°í¬ìš©)</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background-color: #f4f7f6;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 700px;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin: 0 auto;
        }

        h1 {
            color: #2c3e50;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
        }

        input[type="text"],
        input[type="password"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            box-sizing: border-box;
            font-family: monospace;
        }

        textarea {
            height: 150px;
            resize: vertical;
        }

        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
            font-size: 18px;
            font-weight: bold;
            transition: background 0.3s;
        }

        button:hover {
            background: #2980b9;
        }

        .card {
            background: #e8f4fd;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            border-left: 5px solid #3498db;
        }

        .success {
            color: #27ae60;
            text-align: center;
            font-weight: bold;
            background: #eafaf1;
            padding: 10px;
            border-radius: 6px;
        }

        .info-box {
            background: #fff;
            padding: 15px;
            border: 1px solid #cce5ff;
            border-radius: 6px;
            font-size: 0.85em;
            line-height: 1.6;
        }

        code {
            background: #eee;
            padding: 2px 5px;
            border-radius: 4px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>âš™ï¸ ì‹œìŠ¤í…œ í†µí•© ì„¤ì •</h1>

        <% if (locals.success) { %>
            <p class="success">
                <%= success %>
            </p>
            <% } %>

                <form action="/save-config" method="POST">
                    <!-- 1. ìŠ¬ë™ ì—°ë™ ì•ˆë‚´ -->
                    <div class="card">
                        <h3>1. ìŠ¬ë™ ì•± ì„¤ì • (í†µì‹ ìš©)</h3>
                        <div class="info-box">
                            <b>[ì„¤ì • ë°©ë²•]</b><br>
                            1. ngrok ì‹¤í–‰ í›„ ë°œê¸‰ëœ <b>Forwarding ì£¼ì†Œ</b> ë³µì‚¬<br>
                            2. ìŠ¬ë™ ëŒ€ì‹œë³´ë“œì˜ ì•„ë˜ ë‘ ê³³ì— ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”:<br>
                            &nbsp;&nbsp; - <b>Event Subscriptions</b> > Request URL<br>
                            &nbsp;&nbsp; - <b>Interactivity & Shortcuts</b> > Request URL<br>
                            <code style="display: block; margin-top: 5px;">http://<%= host %>/slack/events</code>
                        </div>
                    </div>

                    <!-- 2. ìŠ¬ë™ í‚¤ ì…ë ¥ -->
                    <div class="card">
                        <h3>2. ìŠ¬ë™ API í‚¤</h3>
                        <div class="form-group">
                            <label>Signing Secret</label>
                            <input type="password" name="SLACK_SIGNING_SECRET"
                                value="<%= config.SLACK_SIGNING_SECRET || '' %>">
                        </div>
                        <div class="form-group">
                            <label>Bot User OAuth Token (xoxb-...)</label>
                            <input type="password" name="SLACK_BOT_TOKEN" value="<%= config.SLACK_BOT_TOKEN || '' %>">
                        </div>
                    </div>

                    <!-- 3. Gemini AI í‚¤ -->
                    <div class="card">
                        <h3>3. AI ë¶„ì„ ì„¤ì • (Gemini)</h3>
                        <div class="form-group">
                            <label>Gemini API Key</label>
                            <input type="password" name="GEMINI_API_KEY" value="<%= config.GEMINI_API_KEY || '' %>">
                        </div>
                    </div>

                    <!-- 4. êµ¬ê¸€ ì„œë¹„ìŠ¤ ê³„ì • ì„¤ì • (í•µì‹¬!) -->
                    <div class="card" style="background: #fff9db; border-left-color: #f1c40f;">
                        <h3>4. Google ì‹œíŠ¸ ì—°ë™ (ì„œë¹„ìŠ¤ ê³„ì •)</h3>
                        <p style="font-size: 0.85em; color: #666;">
                            ì‚¬ìš©ìê°€ ìˆ˜ë™ìœ¼ë¡œ ë¡œê·¸ì¸í•  í•„ìš”ê°€ ì—†ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. JSON í‚¤ íŒŒì¼ì„ ë©”ëª¨ì¥ìœ¼ë¡œ ì—´ì–´ ë‚´ìš©ì„ ì•„ë˜ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.
                        </p>
                        <div class="form-group">
                            <label>ì„œë¹„ìŠ¤ ê³„ì • JSON í‚¤ ë‚´ìš©</label>
                            <textarea name="GOOGLE_SERVICE_ACCOUNT_KEY"
                                placeholder='{ "type": "service_account", ... }'><%= config.GOOGLE_SERVICE_ACCOUNT_KEY || '' %></textarea>
                        </div>

                        <div class="info-box" style="border-color: #f1c40f;">
                            <b>âš ï¸ ì¤‘ìš”: ì‹œíŠ¸ ê³µìœ  í•„ìˆ˜!</b><br>
                            ì…ë ¥í•˜ì‹  JSON í‚¤ ì•ˆì— ì íŒ <code>client_email</code> ì£¼ì†Œë¥¼ ë³µì‚¬í•˜ì—¬,<br>
                            ê¸°ë¡í•  <b>êµ¬ê¸€ ì‹œíŠ¸ì˜ [ê³µìœ ] ë²„íŠ¼</b>ì„ ëˆ„ë¥´ê³  <b>í¸ì§‘ì</b>ë¡œ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.
                        </div>
                    </div>

                    <!-- 5. ì‹œíŠ¸ ID -->
                    <div class="card">
                        <h3>5. ëŒ€ìƒ ìŠ¤í”„ë ˆë“œì‹œíŠ¸</h3>
                        <div class="form-group">
                            <label>ìŠ¤í”„ë ˆë“œì‹œíŠ¸ ID</label>
                            <input type="text" name="SELECTED_SHEET_ID" value="<%= config.SELECTED_SHEET_ID || '' %>"
                                placeholder="ì£¼ì†Œì°½ì˜ /d/ ë’¤ì— ìˆëŠ” ë¬¸ìì—´">
                        </div>
                    </div>

                    <button type="submit">ğŸš€ ëª¨ë“  ì„¤ì • ì €ì¥ ë° ê°€ë™</button>
                </form>
    </div>
</body>

</html>